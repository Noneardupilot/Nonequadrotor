# 项目开发记录

# [v0.4.15] 2018.08.15
- 重新整理和统一飞控中的坐标系。导航系使用ENU（东北天）坐标系，机体系定义为横滚往右为正，俯仰抬头为正，偏航顺时针旋转为正

# [v0.4.14] 2018.08.10
- 更改加速度计和罗盘校准算法为Levenberg-Marquardt法，提升算法的收敛性和鲁棒性

# [v0.4.13] 2018.08.09
- 增加飞行日志功能，使用ulog格式，解锁状态下自动记录飞行日志至TF卡，可以使用FlightPlot工具查看日志

# [v0.4.5] 2018.07.26
- 加入mavlink协议，并自动识别协议类型（bsklink或mavlink），同时增加了对QGC地面站的部分功能支持

# [v0.4.1] 2018.07.23
- 增加USB虚拟串口驱动

# [v0.4.0] 2018.07.20
- 对自动降落和自动返航功能进行了测试优化，修复了部分BUG，并简化了自动返航的控制逻辑

# [v0.3.5] 2018.07.17
- 优化自动模式下的速度控制逻辑，实现打杆匀加速与刹车匀减速的效果

# [v0.3.3] 2018.07.10
- GPS定点模式下的运动刹车效果优化完成

# [v0.3.0] 2018.07.5
- 修复GPS定点控制BUG，并进一步优化刹车控制效果，提升了精度与手感

# [v0.3.0] 2018.07.4
- 在卡尔曼融合中增加观测量相位差补偿，提升导航解算精度

# [v0.1.3] 2018.06.26
- 增加bsklink飞控通信协议，协议内容还待完善

# [v0.1.1] 2018.06.21
- 天穹V3主控板已经修改并打样完毕，准备焊接测试

- 开始设计天穹地面站

# [v0.1.1] 2018.06.14
- 增加自动降落和自动返航功能（未测试）

# [v0.1] 2018.06.10
- 飞控电路设计有问题，电机开启后，传感器受到不明干扰使加速度z轴出现极大的零偏误差。最初怀疑是震动导致，经过两个星期的多次对比测试后，确定为电路干扰问题，目前还在查找原因。

# [v0.1] 2018.06.07
- 增加环境风速估计，以及高度卡尔曼的测量误差方差自适应（基于飞行状态与环境风速）

- 修复加速度零偏误差计算的BUG

- 增加加速度传感器的正反比例误差补偿


# [v0.1] 2018.06.03
- 完成GPS定点控制逻辑测试，已经能初步实现定点飞行（打杆控速度，回中悬停）。

- 至此，所有基础飞行功能测试完毕，版本号升至0.1，接下来开始对飞控各部分细节、导航精度及飞行效果进行优化。

- 目前速度、高度及位置估计算法还只进行了初步的实现，等更换新陀螺仪传感器后，再做各方面的优化。

# [v0.0] 2018.06.02
- 初步完成定高调试，高度控制精度为±3cm

- 优化了姿态控制PID参数，将姿态控制精度提升至±0.1°（悬停）

- 目前使用的MPU6500传感器，其加速度计的某些误差过大，且难以校准，因此准备更换成ICM20689

- 接下来将会调试GPS定点功能

# [v0.0] 2018.05.29
- 已完成测试机的组装。

- 初步完成了姿态控制的参数整定以及该控制环节的小问题修复。

- 增加了USB HID驱动

# [v0.0] 2018.05.27
- 完成了飞控板第一版样板的焊接，硬件初步运行正常，正开始在该飞控板上调试程序。

- 飞机组装遇到一些问题（电机孔位对不上），还需要一些工具才能完成工作。

# [v0.0] 2018.05.22
- 初步完成了飞控控制部分，包括姿态控制、高度控制和位置控制，并将控制算法与操控逻辑分开实现，降低程序的耦合度，方便后期开发。

- 接着会增加一些基础的任务控制功能，如自动降落和自动返航等。

- 目前飞控还需要完成的部分主要有遥控数据处理以及飞行状态检测（包括起飞和落地检测）。

# [v0.0] 2018.05.21
- 目前飞控软件部分还剩下控制部分未完成，主要在考虑如何处理好各个控制环节的耦合关系，方便后期飞控功能扩展及降低二次开发难度。

- 飞控电路板（主控和IMU板）已发出打样，估计两三天内回来，接着便要开始焊板子、测试硬件了。

- 接下来的两天内主要尽快把接收机信号解码、摇杆数据处理及基础控制部分（姿态、高度）写好，方便飞控的初步调试
